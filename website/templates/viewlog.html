{% extends 'base.html' %}

{% block header %} {% endblock %}


{% block content %}
<div class="panel">
    <div class="info-panel">
        <div class="title-holder">
            <h2>View manual logs in database</h2>
            </div>
        
        
        <form action="/viewlog" method="post">
            <button id="display-btn"class="display-btn" name="search" type="submit"> Display </button>
            <textarea style="display: none;" name="hidden" id="hidden" cols="0" rows="0"></textarea>
        <div class="code-list">
        <table class="loglist">
            <tbody class="table-body">
                <tr class="list-header">
                    <th> Error Code </th>
                    <th> Error Header</th>
                </tr>
           
            {% for num in use_dict %}
                <tr class="loglist-item" name="item" onClick="Assign(this)">
                    <td>{{ num }}</td> 
                    <td>{{ use_dict[num][1] }}</td>
                </tr>       
            {% endfor %}
        </tbody>
        </table>
        </div>
        </form>
    </div>
</div>

<div class="panel">
    <div class="info-panel">
        <h2>Error Number: {{ num_text }} </h2>
        <h4>Error Header: {{ header_text }}</h4>
        <div class="par-wrapper">
        <p id="use-holder"> {{ message_text }}</p>
        </div>
    </div>
</div>
<script>




    document.getElementById("display-btn").disabled = true;

    function Assign(obj){
        document.getElementById("display-btn").disabled = false;
        //console.log(obj);
        var current_selected = document.getElementsByClassName("loglist-item-selected");
        
        if (current_selected[0]){
            current_selected[0].className="loglist-item";
        }
        obj.className="loglist-item-selected";
      document.getElementById("hidden").value = obj.children[0].innerHTML;
    //  window.location.reload();
    }
</script>
{% endblock %}